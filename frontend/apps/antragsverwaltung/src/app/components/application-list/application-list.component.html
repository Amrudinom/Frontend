<div class="container">
  <h1>Erhaltene FÃ¶rderantrÃ¤ge</h1>

  <div class="filter container">
    <label>
      Status:
      <select [(ngModel)]="filter.status">
        <option value="">Alle</option>
        <option *ngFor="let s of statusOptions" [value]="s">{{ s }}</option>
      </select>
    </label>
    <label>
      Antragsteller:
      <select [(ngModel)]="filter.userId">
        <option value="">Alle</option>
        <option *ngFor="let u of users" [value]="u.id">{{ u.name }}</option>
      </select>
    </label>
    <label>
      Von:
      <input type=date [(ngModel)]="filter.from">
    </label>
    <label>
      Bis:
      <input type="date" [(ngModel)]="filter.to">
    </label>
    <button (click)="applyFilter()">Filtern</button>
    <button (click)="resetFilter()">ZurÃ¼cksetzten</button>

  </div>


  <div *ngIf="loading" class="loading">Lade AntrÃ¤ge...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div *ngIf="!loading && antraege.length > 0" class="antraege-list">
    <div *ngFor="let antrag of antraege; trackBy: trackById" class="antrag-card">

      <h3>{{ antrag.titel }}</h3>
      <p class="beschreibung">{{ antrag.beschreibung }}</p>

      <div class="details">
        <p><strong>Betrag:</strong> {{ antrag.betrag | currency:'EUR' }}</p>
        <p>
          <strong>Status:</strong>
          <span [class]="'status-badge status-' + antrag.status.toLowerCase()">
            {{ getStatusText(antrag.status) }}
          </span>
        </p>
        <p><strong>Eingereicht:</strong> {{ antrag.eingereichtAm | date:'dd.MM.yyyy' }}</p>
      </div>

      <div *ngIf="antrag.status === 'ABGELEHNT' && antrag.ablehnungsgrund" class="ablehnungsgrund">
        <strong>Ablehnungsgrund:</strong>
        <p>{{ antrag.ablehnungsgrund }}</p>
      </div>

      <div class="actions">
        <button
          type="button"
          class="details-button"
          (click)="openDetails(antrag.id)"
        >
          ğŸ“„ Formular ansehen
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && antraege.length === 0" class="no-data">
    <p>ğŸ“‹ Keine AntrÃ¤ge vorhanden</p>
  </div>
</div>
